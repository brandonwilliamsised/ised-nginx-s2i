worker_processes 1;

events {
    worker_connections 1024;
}

http {
    
    sendfile on;
    
#    ssl_certificate     /config/certs/cert.pem;
#    ssl_certificate_key /config/certs/cert.key;
#    ssl_ciphers         EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH;
#    ssl_protocols       TLSv1.1 TLSv1.2;
    
    server {
        server_name dev.ised-isde.canada.ca;
        listen 8080;
        
        gzip on;
        
        location / {
            proxy_pass         http://drupal-wxt.drupal-dev.svc:8080;
            include            /opt/app-root/etc/nginx.d/proxy.conf;
        }
        
        location /app/ciposs/agents {
            proxy_pass         http://ciposs-agents-web.ciposs-agents-dev.svc:8080;
            include            /opt/app-root/etc/nginx.d/proxy.conf;
        }
       
        include            /opt/app-root/etc/nginx.d/epic-301.conf;
    }
    
    server {
        server_name uat.ised-isde.canada.ca;
        listen 8080;
        
        gzip on;
        
        location / {
            proxy_pass         http://drupal-wxt.drupal-uat.svc:8080;
            include            /opt/app-root/etc/nginx.d/proxy.conf;
        }
        
        location /app/ciposs/agents {
            proxy_pass         http://ciposs-agents-web.ciposs-agents-uat.svc:8080;
            include            /opt/app-root/etc/nginx.d/proxy.conf;
        }
        
        include            /opt/app-root/etc/nginx.d/epic-301.conf;
    }
    
    server {
        server_name qa.ised-isde.canada.ca;
        listen 8080;
        
        gzip on;
        
        location / {
            proxy_pass         http://drupal-wxt.drupal-qa.svc:8080;
            include            /opt/app-root/etc/nginx.d/proxy.conf;
        }
        
        location /app/ciposs/agents {
            proxy_pass         http://ciposs-agents-web.ciposs-agents-qa.svc:8080;
            include            /opt/app-root/etc/nginx.d/proxy.conf;
        }
        
        include            /opt/app-root/etc/nginx.d/epic-301.conf;
    }
    
}
