worker_processes 1;

events {
    worker_connections 1024;
}

http {
    server {
        listen 8080;
        
        gzip on;

        location /app/scr/innovation/ {
            proxy_set_header  Host $host;
            proxy_set_header  X-Real-IP $remote_addr;
            proxy_set_header  X-Forwarded-Proto https;
            proxy_set_header  X-Forwarded-For $remote_addr;
            proxy_set_header  X-Forwarded-Host $remote_addr;
            proxy_pass http://icps-web.icps-dev.svc:8080$request_uri;   
        }
        
        location ~ /eic/(.*)$ {
            return 301 http://www.ic.gc.ca/eic/$1?$args;
        }

        location ~ /utils/(.*)$ {
            return 301 http://www.ic.gc.ca/utils/$1?$args;
        }
        
    }
}
